/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Pipe } from '@angular/core';
import { isTypeof } from '../../utils/util';
/**
 * \@docsPrivate
 *
 * \@description
 *
 * Pipe responsável por apresentar um horário baseado no formato de entrada definido na API da Portinari.
 */
export class PoTimePipe {
    /**
     * @param {?} time
     * @param {?=} format
     * @return {?}
     */
    transform(time, format) {
        /** @type {?} */
        const hourRegex = /^(([0-1][0-9])|(2[0-3])):[0-5][0-9]:[0-5][0-9][\.]?([0-9]{1,6})?$/g;
        if (isTypeof(time, 'string') && hourRegex.test(time)) {
            /** @type {?} */
            const amountOfF = format ? format.lastIndexOf('f') - format.indexOf('f') + 1 : 0;
            /** @type {?} */
            const miliseconds = this.addDotMiliseconds(time.substring(9, 9 + amountOfF), amountOfF);
            /** @type {?} */
            const formatMiliseconds = this.getFormatMiliseconds(amountOfF);
            return this.formatValue(time, format, formatMiliseconds, miliseconds);
        }
        return null;
    }
    /**
     * @private
     * @param {?} miliseconds
     * @param {?} amountOfF
     * @return {?}
     */
    addDotMiliseconds(miliseconds, amountOfF) {
        if (miliseconds && amountOfF) {
            miliseconds = '.' + miliseconds;
        }
        return miliseconds;
    }
    /**
     * @private
     * @param {?} time
     * @param {?} format
     * @param {?} formatMiliseconds
     * @param {?} miliseconds
     * @return {?}
     */
    formatValue(time, format, formatMiliseconds, miliseconds) {
        if (time && format) {
            /** @type {?} */
            const hour = time.substring(0, 2);
            /** @type {?} */
            const minutes = time.substring(3, 5);
            /** @type {?} */
            const seconds = time.substring(6, 8);
            format = format.replace('HH', hour);
            format = format.replace('mm', minutes);
            format = format.replace('ss', seconds);
            format = format.replace(`.${formatMiliseconds}`, miliseconds);
            return format;
        }
        else {
            return time;
        }
    }
    /**
     * @private
     * @param {?} amountOfF
     * @return {?}
     */
    getFormatMiliseconds(amountOfF) {
        /** @type {?} */
        let formatMiliseconds = '';
        for (let i = 0; i < amountOfF; i++) {
            formatMiliseconds += 'f';
        }
        return formatMiliseconds;
    }
}
PoTimePipe.decorators = [
    { type: Pipe, args: [{
                name: 'po_time'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdGltZS5waXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdWkvIiwic291cmNlcyI6WyJsaWIvcGlwZXMvcG8tdGltZS9wby10aW1lLnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBRXBELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7Ozs7QUFZNUMsTUFBTSxPQUFPLFVBQVU7Ozs7OztJQUVyQixTQUFTLENBQUMsSUFBWSxFQUFFLE1BQWU7O2NBRS9CLFNBQVMsR0FBRyxvRUFBb0U7UUFFdEYsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7O2tCQUU5QyxTQUFTLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztrQkFFMUUsV0FBVyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLEVBQUUsU0FBUyxDQUFDOztrQkFDakYsaUJBQWlCLEdBQVcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQztZQUV0RSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLENBQUMsQ0FBQztTQUN2RTtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7Ozs7OztJQUVPLGlCQUFpQixDQUFDLFdBQW1CLEVBQUUsU0FBaUI7UUFDOUQsSUFBSSxXQUFXLElBQUksU0FBUyxFQUFFO1lBQzVCLFdBQVcsR0FBRyxHQUFHLEdBQUcsV0FBVyxDQUFDO1NBQ2pDO1FBQ0QsT0FBTyxXQUFXLENBQUM7SUFDckIsQ0FBQzs7Ozs7Ozs7O0lBRU8sV0FBVyxDQUFDLElBQVksRUFBRSxNQUFjLEVBQUUsaUJBQXlCLEVBQUUsV0FBbUI7UUFDOUYsSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFOztrQkFDWixJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDOztrQkFDM0IsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7a0JBQzlCLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFcEMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztZQUN2QyxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdkMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxpQkFBaUIsRUFBRSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBRTlELE9BQU8sTUFBTSxDQUFDO1NBQ2Y7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFDO1NBQ2I7SUFDSCxDQUFDOzs7Ozs7SUFFTyxvQkFBb0IsQ0FBQyxTQUFpQjs7WUFDeEMsaUJBQWlCLEdBQVcsRUFBRTtRQUVsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2xDLGlCQUFpQixJQUFJLEdBQUcsQ0FBQztTQUMxQjtRQUVELE9BQU8saUJBQWlCLENBQUM7SUFDM0IsQ0FBQzs7O1lBckRGLElBQUksU0FBQztnQkFDSixJQUFJLEVBQUUsU0FBUzthQUNoQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgaXNUeXBlb2YgfSBmcm9tICcuLi8uLi91dGlscy91dGlsJztcblxuLyoqXG4gKiBAZG9jc1ByaXZhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBQaXBlIHJlc3BvbnPDoXZlbCBwb3IgYXByZXNlbnRhciB1bSBob3LDoXJpbyBiYXNlYWRvIG5vIGZvcm1hdG8gZGUgZW50cmFkYSBkZWZpbmlkbyBuYSBBUEkgZGEgUG9ydGluYXJpLlxuICovXG5AUGlwZSh7XG4gIG5hbWU6ICdwb190aW1lJ1xufSlcbmV4cG9ydCBjbGFzcyBQb1RpbWVQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG5cbiAgdHJhbnNmb3JtKHRpbWU6IHN0cmluZywgZm9ybWF0Pzogc3RyaW5nKTogc3RyaW5nIHtcblxuICAgIGNvbnN0IGhvdXJSZWdleCA9IC9eKChbMC0xXVswLTldKXwoMlswLTNdKSk6WzAtNV1bMC05XTpbMC01XVswLTldW1xcLl0/KFswLTldezEsNn0pPyQvZztcblxuICAgIGlmIChpc1R5cGVvZih0aW1lLCAnc3RyaW5nJykgJiYgaG91clJlZ2V4LnRlc3QodGltZSkpIHtcblxuICAgICAgY29uc3QgYW1vdW50T2ZGID0gZm9ybWF0ID8gZm9ybWF0Lmxhc3RJbmRleE9mKCdmJykgLSBmb3JtYXQuaW5kZXhPZignZicpICsgMSA6IDA7XG5cbiAgICAgIGNvbnN0IG1pbGlzZWNvbmRzID0gdGhpcy5hZGREb3RNaWxpc2Vjb25kcyh0aW1lLnN1YnN0cmluZyg5LCA5ICsgYW1vdW50T2ZGKSwgYW1vdW50T2ZGKTtcbiAgICAgIGNvbnN0IGZvcm1hdE1pbGlzZWNvbmRzOiBzdHJpbmcgPSB0aGlzLmdldEZvcm1hdE1pbGlzZWNvbmRzKGFtb3VudE9mRik7XG5cbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFZhbHVlKHRpbWUsIGZvcm1hdCwgZm9ybWF0TWlsaXNlY29uZHMsIG1pbGlzZWNvbmRzKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFkZERvdE1pbGlzZWNvbmRzKG1pbGlzZWNvbmRzOiBzdHJpbmcsIGFtb3VudE9mRjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAobWlsaXNlY29uZHMgJiYgYW1vdW50T2ZGKSB7XG4gICAgICBtaWxpc2Vjb25kcyA9ICcuJyArIG1pbGlzZWNvbmRzO1xuICAgIH1cbiAgICByZXR1cm4gbWlsaXNlY29uZHM7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFZhbHVlKHRpbWU6IHN0cmluZywgZm9ybWF0OiBzdHJpbmcsIGZvcm1hdE1pbGlzZWNvbmRzOiBzdHJpbmcsIG1pbGlzZWNvbmRzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh0aW1lICYmIGZvcm1hdCkge1xuICAgICAgY29uc3QgaG91ciA9IHRpbWUuc3Vic3RyaW5nKDAsIDIpO1xuICAgICAgY29uc3QgbWludXRlcyA9IHRpbWUuc3Vic3RyaW5nKDMsIDUpO1xuICAgICAgY29uc3Qgc2Vjb25kcyA9IHRpbWUuc3Vic3RyaW5nKDYsIDgpO1xuXG4gICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnSEgnLCBob3VyKTtcbiAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCdtbScsIG1pbnV0ZXMpO1xuICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ3NzJywgc2Vjb25kcyk7XG4gICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShgLiR7Zm9ybWF0TWlsaXNlY29uZHN9YCwgbWlsaXNlY29uZHMpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGltZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEZvcm1hdE1pbGlzZWNvbmRzKGFtb3VudE9mRjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBsZXQgZm9ybWF0TWlsaXNlY29uZHM6IHN0cmluZyA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnRPZkY7IGkrKykge1xuICAgICAgZm9ybWF0TWlsaXNlY29uZHMgKz0gJ2YnO1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXRNaWxpc2Vjb25kcztcbiAgfVxuXG59XG4iXX0=